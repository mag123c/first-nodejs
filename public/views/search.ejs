<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="/css/search.css" rel="stylesheet">

</head>
<!-- view return : summonerInfo, summonerLeagueInfo, matchDetailInfo, matchRecentInfo -->

<body>
  <div class="container-fluid d-flex justify-content-center" id="cover-con">
    <div class="container-fluid d-flex flex-column m-5" id="left-con">
      <!-- 소환사 정보 -->
      <div class="d-flex m-3" id="summoner-con">
        <div class="m-1">
          <img src="<%= searchData.summonerInfo.iconURL %>" alt="summoner-icon">
        </div>
        <div class="m-3 d-flex h-con">
          <h3><%= searchData.summonerInfo.name %></h3>
        </div>
      </div>

      <!-- 소환사 티어 정보 -->
      <div class="d-flex flex-column m-3" id="league-con">
        <div class="m-1 d-flex h-con">
          <h3>솔로 랭크</h3>
        </div>
        <div class="m-1 d-flex">
          <div class="m-1">
            <img src="../img/<%= searchData.summonerLeagueInfo.tier %>.png" alt="tier-icon">
          </div>
          <div class="m-1">
            <p>
              <%= searchData.summonerLeagueInfo.tier %>
                <%= searchData.summonerLeagueInfo.rank %>
            </p>
            <p>
              <%= searchData.summonerLeagueInfo.leaguePoints %> LP
            </p>
            <p>
              <%= searchData.summonerLeagueInfo.wins %>승 <%= searchData.summonerLeagueInfo.losses %>패
            </p>
          </div>
      </div>
    </div>

    <!-- 최근 20게임 통계 -->
    <div class="d-flex flex-column m-3" id="detail-con">
      <div class="m-2 d-flex h-con">
        <h3> 최근 20게임 챔피언 통계</h3>
      </div>
      <% for(let i=0; i < searchData.matchRecentInfo.length; i ++) { %>
        <% const curMRI=searchData.matchRecentInfo[i] %>
        <% if(curMRI) { %>
          <% const percent=Math.round(curMRI.data.win / curMRI.data.total * 100); %>
          <% const detailKDA=((curMRI.data.kills + curMRI.data.assists) / curMRI.data.deaths).toFixed(2); %>
            <div class="detail-item d-flex m-3">
              <div class="m-2">
                <img src="<%= curMRI.data.imgURL %>">
              </div>
              <div class="m-2">
                <p>
                  <%= curMRI.championName %>
                </p>
                <p>
                  <%= curMRI.data.total %> 게임
                </p>
              </div>
              <div class="m-2 kdatext-con">
                <p>승률 <%= percent %>%</p>
                <p class="kda-text">KDA <%= detailKDA %>
                </p>
              </div>
            </div>
          <% } %>
        <% } %>
    </div>
  </div>

  <!-- right con -->
  <div class="container-fluid d-flex m-2" id="right-con">
    <!-- 최근 전적 -->
    <div class="d-flex flex-column" id="recent-con">
      <% for(let i=0; i < searchData.matchDetailInfo.length; i ++) { %>
        <% const curMDI=searchData.matchDetailInfo[i]; %>
          <% if(curMDI) {%>
            <div class="recent-detail-con d-flex m-1">
              <div class="m-1">
                <img src="<%= curMDI.imgURL %>" alt="detail-champion-icon">
              </div>
              <div class="m-1 winfalse-con">
                <h3 class="winfalse-text">
                  <%= curMDI.win %>
                </h3>
              </div>
              <div class="m-1 kdatext-con">
                <p class="kda-text">KDA : <%= curMDI.kdaDecimal %>
                </p>
                <p class="kda-text2">
                  <%= curMDI.kills %> / <%= curMDI.deaths %> / <%= curMDI.assists %>
                </p>
              </div>
              <div class="m-1 cs-con">
                <p class="minionspercent-text">분당 <%= curMDI.minionsKilledPerMinutes %>개</p>
                <p class="totalminions-text">
                  <%= curMDI.totalMinionsKilled %> CS
                </p>
              </div>
              <div class="m-1 playtime-con">
                <p class="playtime-text">
                  <%= curMDI.playTime %>
                </p>
                <p class="playtime-text">
                  <%= curMDI.playDate %>
                </p>
              </div>
            </div>
            <% } %>
              <% } %>
    </div>
  </div>
  </div>

  <!-- script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="node_modules/jquery/dist/jquery.js"></script>
  <script src="/js/search.js"></script>
</body>

</html>